<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>:D</title>
  <link href="https://fonts.googleapis.com/css?family=Work+Sans:300,400" rel="stylesheet">
  <link rel="shortcut icon" type="image/png" href="img/agung.jpg" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.20.3/TweenMax.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.10.4/gsap.min.js"></script>
  <link rel="stylesheet" href="style/style.css">
</head>
<body>
  <div class="btnPlay">
    <div class="pulse" id="btnPlay">
      <span style="--i:0;"></span>
      <span style="--i:1;"></span>
      <img class="image beat" src="img/agung.jpg" alt="">
      <audio id="song" controls loop src="Liyue Harbor Daytime.mp3" hidden></audio>
    </div>
  </div>
  <audio id="audio1" src="seycarabass.mp3" hidden></audio>
  <audio id="audio2" src="seycara.mp3" hidden></audio>
  <audio id="audio3" src="OoO.mp3" hidden></audio>
  <div class="container">
    <div class="one">
      <h1 class="one">
        <span >Hi</span>
        <span>Che</span>
      </h1>
      <p class="two" >I really like your name btw :3</p>
    </div>
    <div class="three">
      <p >It's your birthday!!! :D</p>
    </div>
    <div class="four">
      <div class="text-box">
        <p class="hbd-chatbox" >Happy birthday to you!! Yeee! Many many happy blah...</p>
        <p class="fake-btn" >Send</p>
      </div>
    </div>
    <div class="five">
      <p class="idea-1" >That's what I was going to do.</p>
      <p class="idea-2" >But then I stopped.</p>
      <p class="idea-3">
        <span >I realised, I wanted to do something</span>
        <strong >special</strong>.</p>
      <p class="idea-4" >Because,</p>
      <p class="idea-5">
        <span >You are Special</span>
        <span class="smiley" >:)</span>
      </p>
      <p class="idea-6">
        <span >S</span>
        <span >O</span>
      </p>
    </div>
    <div class="six">
      <img src="img/c.jpeg" width="300" height="300" alt="" class="lydia-dp" draggable="false">
      <img src="img/hat.svg" alt="" class="hat">
      <div class="wish">
        <h3 class="wish-hbd" >Happy Birthday!</h3>
        <h5 >Wish you all the best n God Bless You ;)</h5>
      </div>
      <div class="more-div">
        <!-- <h5 class="more">More Letters</h5> -->
          <a href="#" class="cta" id="story">
            <span>More Letters</span>
            <svg width="13px" height="10px" viewBox="0 0 13 10">
                <path d="M1,5 L11,5"></path>
                <polyline points="8 1 12 5 8 9"></polyline>
            </svg>
          </a>
      </div>
    </div>
    <div class="seven">
      <div class="baloons">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon3.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon2.svg" alt="">
        <img src="img/ballon1.svg" alt="">
        <img src="img/ballon3.svg" alt="">
      </div>
    </div>
    <div class="nine">
      <div class="content content1" id="content1">
        <div class="message">
          <p>Today is...</p>
          <p>as beautiful as other days</p>
          <p>but you realize</p>
          <p>another year has gone</p>
          <p>in a blink of the eyes</p>
          <p><strong>however</strong></p>
          <p>Do you know..?</p>
          <p>today is just special</p>
          <p>so special to you</p>
          <p>that's why</p>
          <p>Let's make it...</p>
          <p>the best celebration ever</p>
          <p>and let me share...</p>
          <p>a piece of happiness to you</p>
          <p>I made all this...</p>
          <p>as a birthday present to you</p>
          <p>thanks for being there</p>
          <p>thanks for the journey we made</p>
          <p>thanks for everything</p>
          <p>I wish you all the best</p>
          <p>May your life be at ease</p>
          <p>May all your wishes come true</p>
          <p>Remember</p>
          <p>your ambitions</p>
          <p>you live as a free bird...</p>
          <p>flying in the blue sky</p>
          <p>Now things are different...</p>
          <p>real story of your life</p>
          <p>is just about to begin</p>
          <p>indeed..</p>
          <p>but...</p>
          <p>don't worry</p>
          <p>because...</p>
          <p>God has your back</p>
          <p>and</p>
          <p>this year will be better</p>
          <p>and I hope</p>
          <p>you'll find...</p>
          <p>happiness along the way</p>
          <p>keep your spirit up</p>
          <p>enjoy every single moment...</p>
          <p>that you experience today</p>
          <p>fill it with your most beautiful smile</p>
          <p>and make it the best memory..</p>
          <p>lastly...</p>
          <p>it's time for you to make a wish!!</p>
          <p>Blow Out The Candle!!!</p>
        </div>
        <div class="cake">
          <div class="plate"></div>
          <div class="layer layer-bottom"></div>
          <div class="layer layer-middle"></div>
          <div class="layer layer-top"></div>
          <div class="icing"></div>
          <div class="drip drip1"></div>
          <div class="drip drip2"></div>
          <div class="drip drip3"></div>
          <div class="candle">
            <div class="flame"></div>
          </div>
        </div>
      </div>
      <div class="content content2" id="content2">
        <span class="center-text" id="thankyou">Thank you!! <img src="img/nobgsmiley.png" alt="" style="width:30px"></span>
        <img src="img/C IKUYOH GIF FIX.gif" alt="C <3" usemap="#workmap1" style="width:25%" 
          class="corner-image top-left">
        <img src="img/C IKUYOH GIF FIX.gif" alt="C <3" usemap="#workmap2" style="width:25%" 
          class="corner-image top-right">
        <img src="img/C IKUYOH GIF FIX.gif" alt="C <3" usemap="#workmap3" style="width:25%" 
          class="corner-image bottom-left">
        <img src="img/C IKUYOH GIF FIX.gif" alt="C <3" usemap="#workmap4" style="width:25%" 
          class="corner-image bottom-right">

        <img src="img/aaaaaaaaaa.gif" alt="C <3" style="width:6%" class="corner-image aaa">
        <img src="img/robin-robin-walks-away.gif" alt="C <3" style="width:20%" class="corner-image robin">
        <img src="img/everett-jacqui.gif" alt="C <3" style="width:13%" class="corner-image everet">
        <img src="img/kurukuru-herta.gif" alt="C <3" style="width:13%" class="corner-image kuru-kuru">
        <img src="img/gawr-gura-gura.gif" alt="C <3" style="width:13%" class="corner-image gura">
        <img src="img/sleepy-sleepycat.gif" alt="C <3" style="width:13%" class="corner-image sleepycat">
        <img src="img/hutao.gif" alt="C <3" style="width:13%" class="corner-image hutao">
        <img src="img/shigure-ui-ui-shigure.gif" alt="C <3" style="width:26%" class="corner-image shigure">
        <img src="img/xd-meme.gif" alt="C <3" style="width:6.5%" class="corner-image xd">
        <img src="img/cat-meme.gif" alt="C <3" style="width:3.25%" class="corner-image long-cat">
        <img src="img/cockroach-zhongli.gif" alt="C <3" style="width:13%" class="corner-image zhongli">
        <img src="img/dog-cute.gif" alt="C <3" style="width:20%" class="corner-image dog">
        <img src="img/lucucing.gif" alt="C <3" style="width:20%" class="corner-image lucucing">
        <img src="img/burnice-dancing.gif" alt="C <3" style="width:17%" class="corner-image burnice">
      </div>
      
      <div class="arrow arrow-right" id="arrow-right" onclick="goToPage(2)">&#129094;</div>
      <div class="arrow arrow-left" id="arrow-left" onclick="goToPage(1)">&#129092;</div>

      <map name="workmap1" title= "Happy birthday üòä‚úåÔ∏è">
        <area shape="rect" coords="140,45,300,200" onclick="myFunction1()">
      </map>
      <map name="workmap2" title="You can click me yk">
        <area shape="rect" coords="140,45,300,200" onclick="myFunction2()">
      </map>
      <map name="workmap3" title="Today is a happy day">
        <area shape="rect" coords="140,45,300,200" onclick="myFunction3()">
      </map>
      <map name="workmap4" title="Wait there is more ü´®">
        <area shape="rect" coords="140,45,300,200" onclick="myFunction4()">
      </map>
    
    </div>
  </div>
</body>

<!-- <script type="application/javascript" src="script/main.js"></script> -->
<script>
// Animation Timeline

const ideaTextTrans = {
  opacity: 0,
  y: -20,
  rotationX: 5,
  skewX: "15deg"
};

const ideaTextTransLeave = {
  opacity: 0,
  y: 20,
  rotationY: 5,
  skewX: "-15deg"
};

const animationTimeline = () => {
  const textBoxChars = document.getElementsByClassName("hbd-chatbox")[0];
  const hbd = document.getElementsByClassName("wish-hbd")[0];

  textBoxChars.innerHTML = `<span>${textBoxChars.innerHTML
    .split("")
    .join("</span><span>")}</span`;

  hbd.innerHTML = `<span>${hbd.innerHTML
    .split("")
    .join("</span><span>")}</span`;


  const tl = new TimelineMax({});

  tl
    .to(".container", 0.1, {
      visibility: "visible"
    })

    .from(".one", 0.7, {
      opacity: 0,
      y: 10
    })

    .from(".two", 0.4, {
      opacity: 0,
      y: 10
    })

    .addPause()

    .to(".one", 0.7, {
      opacity: 0,
      y: 10
      },"+=2.5")

    .to(".two", 0.7, {
      opacity: 0,
      y: 10
      },"-=1")

    .from(".three", 0.7, {
      opacity: 0,
      y: 10
      // scale: 0.7
      })

    .addPause()

    .to(".three", 0.7, {
      opacity: 0,
      y: 10
      }, "+=1")

    .from(".four", 0.7, {
      scale: 0.2,
      opacity: 0
      })

    .from(".fake-btn", 0.3, {
      scale: 0.2,
      opacity: 0
      })

    .staggerTo(
      ".hbd-chatbox span", 0.5, {
      visibility: "visible"
      }, 0.05 )

    .to(".fake-btn", 0.1, {
      backgroundColor: "rgb(127, 206, 248)"
      })

    .addPause()

    .to(".four", 0.5, {
      scale: 0.2,
      opacity: 0,
      y: -150
      }, "+=0.7" )

    .from(".idea-1", 0.7, ideaTextTrans)

    .addPause()

    .to(".idea-1", 0.7, ideaTextTransLeave, "+=1.5")

    .from(".idea-2", 0.7, ideaTextTrans)

    .addPause()

    .to(".idea-2", 0.7, ideaTextTransLeave, "+=1.5")

    .from(".idea-3", 0.7, ideaTextTrans)

    .to(".idea-3 strong", 0.5, {
      scale: 1.2,
      x: 10,
      backgroundColor: "rgb(21, 161, 237)",
      color: "#fff"
      })

    .addPause()

    .to(".idea-3", 0.7, ideaTextTransLeave, "+=1.5")

    .from(".idea-4", 0.7, ideaTextTrans)

    .addPause()

    .to(".idea-4", 0.7, ideaTextTransLeave, "+=1.5")

    .from( ".idea-5", 0.7, {
      rotationX: 15,
      rotationZ: -10,
      skewY: "-5deg",
      y: 50,
      z: 10,
      opacity: 0
      }, "+=0.5" )

    .to( ".idea-5 .smiley", 0.7, {
      rotation: 90,
      x: 8
      }, "+=0.4" )

    .addPause()

    .to( ".idea-5", 0.7, {
      scale: 0.2,
      opacity: 0
      }, "+=2" )

    .staggerFrom( ".idea-6 span", 0.8, {
      scale: 3,
      opacity: 0,
      rotation: 15,
      ease: Expo.easeOut
      }, 0.2 )

    .staggerTo( ".idea-6 span", 0.8, {
      scale: 3,
      opacity: 0,
      rotation: -15,
      ease: Expo.easeOut
      }, 0.2, "+=1")

    .staggerFromTo( ".baloons img", 2.5, {
      opacity: 0.9,
      y: 1400
      },
      {
      opacity: 1,
      y: -1000
      }, 0.2)

    .from( ".lydia-dp", 0.5, {
      scale: 3.5,
      opacity: 0,
      x: 25,
      y: -25,
      rotationZ: -45
      }, "-=2" )

    .from(".hat", 0.5, {
      x: -100,
      y: 350,
      rotation: -180,
      opacity: 0
      })

    .staggerFrom( ".wish-hbd span", 0.7, {
      opacity: 0,
      y: -50,
      // scale: 0.3,
      rotation: 150,
      skewX: "30deg",
      ease: Elastic.easeOut.config(1, 0.5)
      }, 0.1 )

    .staggerFromTo( ".wish-hbd span", 0.7, {
      scale: 1.4,
      rotationY: 150
      },
      {
      scale: 1,
      rotationY: 0,
      color: "#ff69b4",
      ease: Expo.easeOut
      }, 0.1, "party" )

    .from( ".wish h5", 0.5, {
      opacity: 0,
      y: 10,
      skewX: "-15deg"
      }, "party" )

    .from( ".more-div", 0.5, {
      opacity: 0,
      y: 20,
      skewX: "-15deg",
      onComplete: () => {
        console.log("Animasi selesai");
        // Setelah animasi selesai, izinkan pointer events
        const moreDiv = document.querySelector(".more-div");
        console.log(moreDiv);
        moreDiv.style.pointerEvents = "auto"; // Mengizinkan interaksi mouse
        }
      },
      "party+=3"  
    )

  // tl.seek("currentStep");
  // tl.timeScale(2);

  const body = document.body; // Menggunakan body sebagai elemen yang mendengarkan event
  body.addEventListener('click', function() {
    console.log("click");
    
    if (tl && tl.paused()) {
      tl.resume(); // Melanjutkan timeline jika paused
    }
  });
};
  const flame = document.querySelector('.flame');
  const cake = document.getElementsByClassName('cake')[0];
  const btnPlay = document.getElementById('btnPlay');
  const song = document.getElementById('song');
  
  btnPlay.addEventListener('click', function() {
    
    cake.style.display = 'none';
    let opacity = 1; // Start with full opacity
    const fadeDuration = 2000; // Fade duration in milliseconds
    const fadeStep = 50; // Interval in milliseconds for each opacity decrement
    const decrement = fadeStep / fadeDuration; // Calculate how much to decrement each step
    // animationTimeline();
    // btnPlay.style.display = 'none';
    function fadeOut() {
      opacity -= decrement; // Decrease opacity
      if (opacity <= 0) {
        opacity = 0; // Ensure it doesn't go below 0
        btnPlay.style.display = 'none'; // Hide the button when done
        setTimeout(animationTimeline, 2000);
        song.play();
      }
      btnPlay.style.opacity = opacity; // Apply the new opacity
      if (opacity > 0) {
        requestAnimationFrame(fadeOut); // Continue fading
      }
    }
    fadeOut(); 

    document.body.addEventListener('click', function changeBgColor() {
    document.body.classList.add('white-bg'); // Menambah kelas white-bg
    document.body.removeEventListener('click', changeBgColor); // Menghapus event listener
});

  });

  function fadeOutAudio() {
    var fadeOutInterval = setInterval(function() {
      if (song.volume > 0) {
          song.volume = Math.max(0, song.volume - 0.05); // Mengurangi volume, memastikan tidak kurang dari 0
      }
      
      // Jika volume sudah 0
      if (song.volume === 0) {
          song.pause(); // Hentikan audio
          song.currentTime = 0; // Mengatur kembali waktu audio ke awal
          clearInterval(fadeOutInterval); // Menghentikan interval
      }
        // console.log(audio.volume);
        
    }, 150);
  }

  function fadeOutBackground() {
      let opacity = 1; // Mulai dari 1 (tidak transparan)
      const fadeOutInterval = setInterval(function() {
          if (opacity > 0) {
              opacity -= 0.05; // Mengurangi opacity
              document.body.style.backgroundColor = `rgba(0, 0, 0, ${1 - opacity})`; // Ubah warna latar belakang
          } else {
              clearInterval(fadeOutInterval); // Menghentikan interval
          }
      }, 100); // Ulang setiap 100 ms
  }

  const more_letter = document.getElementById('story');
  more_letter.addEventListener('click', function() {
    const sixElements = document.getElementsByClassName('six');
    if (sixElements.length > 0) {
        sixElements[0].style.display = 'none'; 
    }

    let messages = document.querySelectorAll('.message p');
    let index = 0;
    let index2 = 0;

    function showMessage() {
        if (index < messages.length) {
            let currentMessage1 = messages[index];
            let currentMessage2 = (index + 1 < messages.length) ? messages[index + 1] : null;

            currentMessage1.style.display = 'block';
            if (currentMessage2) currentMessage2.style.display = 'block';

            // Animasi GSAP menggunakan .from() dan .to()
            let timeline = gsap.timeline();

            // Memasukkan animasi pertama
            timeline
            .from(currentMessage1, 0.7, { opacity: 0, y: 10 }) 
            .to(currentMessage1, 0.7, { opacity: 1, y: 0 }, "+=2.44") 
            .from(currentMessage2, 0.7, { opacity: 0, y: 10 }, "-=0.7") 
            .to(currentMessage2, 0.7, { opacity: 1, y: 0 }, "+=2.44") 
            .to([currentMessage1, currentMessage2], 0.7, { opacity: 0, y: 10 }) 
            // .from(currentMessage1, -10, { opacity: 0, y: 10 }) 
            // .to(currentMessage1, -10, { opacity: 1, y: 0 }, "+=2.44") 
            // .from(currentMessage2, -10, { opacity: 0, y: 10 }, "-=0.7") 
            // .to(currentMessage2, -10, { opacity: 1, y: 0 }, "+=2.44") 
            // .to([currentMessage1, currentMessage2], -10, { opacity: 0, y: 10 }) 
            .call(() => { 
              currentMessage1.style.display = 'none';
              if (currentMessage2) currentMessage2.style.display = 'none';

              if (index >= 42) {
                  for (let i = index; i < messages.length; i++) {
                      messages[i].style.color = 'white';
                      messages[i].style.textShadow = '2px 2px 5px black';
                  }
              }
              index += 2; // Naikkan indeks ke pesan berikutnya
              if (index < messages.length) {
                  showMessage(); // Tampilkan pesan berikutnya
              }
            });

            index2++;
            if (index2 === 23) {
                fadeOutAudio();
                fadeOutBackground();
            }

            if (currentMessage1.innerText === "BLOW OUT THE CANDLE!!!") {
                setTimeout(() => {


                    cake.style.display = 'block'; // Tampilkan elemen
                    cake.classList.add('fade-in'); // Tambahkan kelas fade-in

                    flame.style.display = 'block'; // Tampilkan elemen

                    function blowOutCandle() {
                        flame.style.display = 'none';
                        document.body.style.transition = "background 10s ease-in"; // Menambahkan transisi 4 detik
                        document.body.style.backgroundColor = "linear-gradient(to left, rgba(255, 255, 255, 0), rgba(0, 0, 0, 0) 40%), #000000"; // Mulai dengan transparan
                        setTimeout(() => {
                          document.body.style.transition = "background 10s ease-in"; // Pastikan transisi masih aktif
                          document.body.style.background = "linear-gradient(to left, rgba(255, 255, 255, 0.2), rgba(0, 0, 0, 0) 40%), #000000"; // Gradien akhir
                        }, 100); // 100ms untuk memberi waktu agar transisi terlihat
                        arrowRight.style.display = 'block'; 
                        setTimeout(() => {
                          audio1.play(); // Start audio1 after delay
                          clearInterval(fadeOutInterval);
                        }, 2000); // 2-second delay
                        setTimeout(() => {
                          audio2.play();
                          clearInterval(fadeOutInterval);
                        }, 2000); // 2-second delay
                    }

                    navigator.mediaDevices.getUserMedia({ audio: true })
                        .then(stream => {
                            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                            const analyser = audioContext.createAnalyser();
                            const microphone = audioContext.createMediaStreamSource(stream);
                            const javascriptNode = audioContext.createScriptProcessor(2048, 1, 1);

                            analyser.smoothingTimeConstant = 0.8;
                            analyser.fftSize = 1024;

                            microphone.connect(analyser);
                            analyser.connect(javascriptNode);
                            javascriptNode.connect(audioContext.destination);

                            javascriptNode.onaudioprocess = () => {
                                const array = new Uint8Array(analyser.frequencyBinCount);
                                analyser.getByteFrequencyData(array);

                                const average = array.reduce((a, b) => a + b) / array.length;
                                if (average > 60) {
                                  if(flame.style.display == 'block'){
                                    blowOutCandle();
                                  };
                                }
                            };
                        })
                        .catch(err => {
                            console.error("Gagal mendapatkan akses mikrofon:", err);
                        });
                }, 50);
            }
        }
    }
    showMessage();
});


const content1 = document.getElementById('content1');
const content2 = document.getElementById('content2');
const arrowRight = document.getElementById('arrow-right');
const arrowLeft = document.getElementById('arrow-left');

function myFunction1() {
  alert("Frame aman?");
}

function myFunction2() {
  alert("aaa.. >//<");
}

function myFunction3() {
  alert("Berlebihan.. iya");
}

function myFunction4() {
  alert("There is something after the sohfghtysjksdf");
}

// Fungsi untuk menampilkan konten baru
// arrowRight.addEventListener('click', function(event) {
//     event.preventDefault(); 
//     content1.style.transform = 'translateX(-100%)'; 
//     content2.style.transform = 'translateX(0)';

//     arrowRight.style.display = 'none'; 
//     arrowLeft.style.display = 'block'; 
    
// });

// // Fungsi untuk kembali ke konten sebelumnya
// arrowLeft.addEventListener('click', function(event) {
//     event.preventDefault(); // Mencegah tautan melakukan navigasi
//     content1.style.transform = 'translateX(0)'; // Tampilkan konten 1
//     content2.style.transform = 'translateX(100%)'; // Geser konten 2 ke kanan

//     arrowLeft.style.display = 'none'; // Sembunyikan panah kiri
//     arrowRight.style.display = 'block'; // Tampilkan panah kanan
// });

const audio1 = document.getElementById("audio1");
const audio2 = document.getElementById("audio2");
const audio3 = document.getElementById("audio3");

audio1.volume = 1.0; // Full volume on page 1
audio2.volume = 0.0;

// window.onload = () => {
//             setTimeout(() => {
//                 audio1.play(); // Start audio1 after delay
//             }, 2000); // 2-second delay
//             setTimeout(() => {
//                 audio2.play();
//             }, 2000); // 2-second delay
            
//         };

/*function smoothVolumeTransition(audioToFadeOut, audioToFadeIn, duration = 1000) {
  let fadeOutInterval = setInterval(() => {
      if (audioToFadeOut.volume > 0) {
          audioToFadeOut.volume = Math.max(0, audioToFadeOut.volume - 0.05); // Fade out
      } else {
          clearInterval(fadeOutInterval);
      }
  }, duration / 20);

  let fadeInInterval = setInterval(() => {
      if (audioToFadeIn.volume < 1) {
          audioToFadeIn.volume = Math.min(1, audioToFadeIn.volume + 0.05); // Fade in
      } else {
          clearInterval(fadeInInterval);
      }
  }, duration / 20);
}*/
function smoothVolumeTransition(audioToFadeOut, audioToFadeIn, duration = 1000) {
    const step = 0.125; // Step untuk perubahan volume yang lebih kecil
    const intervalTime = duration / (1 / step); // Menyesuaikan waktu interval
    
    let fadeOutInterval = setInterval(() => {
        if (audioToFadeOut.volume > 0) {
            audioToFadeOut.volume = Math.max(0, audioToFadeOut.volume - step);
        } else {
            clearInterval(fadeOutInterval);
        }
    }, intervalTime);

    let fadeInInterval = setInterval(() => {
        if (audioToFadeIn.volume < 1) {
            audioToFadeIn.volume = Math.min(1, audioToFadeIn.volume + step);
        } else {
            clearInterval(fadeInInterval);
        }
    }, intervalTime);
}

function playAudio3() {
        audio3.volume = 1.0;
        audio3.play();
}

function replaceTitle() {
      const maps = document.querySelectorAll('map');
    // Iterasi melalui setiap elemen <map> dan ubah title-nya
      maps.forEach(map => {
      map.title = "Payaba !!";
    });
}      

function replaceAlerts() {
      window.myFunction1 = window.myFunction2 = window.myFunction3 = window.myFunction4 = function() {
          alert("I Love You !!");
      };
  }

function replaceText() {
      const textElement = document.getElementById("thankyou");

      // Tambahkan kelas untuk memulai transisi fade-out
      textElement.classList.add("fade-out");

      // Setelah 1 detik, ubah teks dan lakukan fade-in
      setTimeout(() => {
        textElement.innerText = "I Love You !! ‚ù§Ô∏è";
        textElement.title = "Take care :)";
        textElement.classList.remove("fade-out");
        textElement.classList.add("fade-in");
      }, 1000);
}

    audio1.addEventListener('ended', function() {
            audio1.pause(); // Hentikan audio
            audio1.currentTime = 0; // Kembalikan waktu audio ke awal
            playAudio3();
    });
    audio2.addEventListener('ended', function() {
            audio2.pause(); // Hentikan audio
            audio2.currentTime = 0; // Kembalikan waktu audio ke awal
            replaceText();
            replaceTitle();
            replaceAlerts();
    });

function goToPage(pageNumber) {
    // Simpan halaman yang dikunjungi ke localStorage

    if (pageNumber === 1) {
        content1.style.transform = 'translateX(0)';
        content2.style.transform = 'translateX(100%)';

        arrowRight.style.display = 'block'; 
        arrowLeft.style.display = 'none';
        smoothVolumeTransition(audio2, audio1);
    } else if (pageNumber === 2) {
        content1.style.transform = 'translateX(-100%)';
        content2.style.transform = 'translateX(0)';

        arrowRight.style.display = 'none'; 
        arrowLeft.style.display = 'block';
        smoothVolumeTransition(audio1, audio2);
    }
}

</script>
</html>